<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><link rel="apple-touch-icon" sizes="256x256" href="/tech-blog/icons/icon-256x256.png?v=ab9d362a82390b1b299fe1144c79b26d"/><meta name="generator" content="Gatsby 2.15.36"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/tech-blog/rss.xml"/><link rel="shortcut icon" href="/tech-blog/icons/icon-48x48.png?v=ab9d362a82390b1b299fe1144c79b26d"/><link rel="manifest" href="/tech-blog/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/tech-blog/icons/icon-48x48.png?v=ab9d362a82390b1b299fe1144c79b26d"/><link rel="apple-touch-icon" sizes="72x72" href="/tech-blog/icons/icon-72x72.png?v=ab9d362a82390b1b299fe1144c79b26d"/><link rel="apple-touch-icon" sizes="96x96" href="/tech-blog/icons/icon-96x96.png?v=ab9d362a82390b1b299fe1144c79b26d"/><link rel="apple-touch-icon" sizes="144x144" href="/tech-blog/icons/icon-144x144.png?v=ab9d362a82390b1b299fe1144c79b26d"/><link rel="apple-touch-icon" sizes="192x192" href="/tech-blog/icons/icon-192x192.png?v=ab9d362a82390b1b299fe1144c79b26d"/><style data-href="/tech-blog/styles.75d456e0bf8bd0a47aa1.css">.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><link rel="apple-touch-icon" sizes="384x384" href="/tech-blog/icons/icon-384x384.png?v=ab9d362a82390b1b299fe1144c79b26d"/><link rel="apple-touch-icon" sizes="512x512" href="/tech-blog/icons/icon-512x512.png?v=ab9d362a82390b1b299fe1144c79b26d"/><title data-react-helmet="true">A very basic introduction to Node.js - Part 4 | tech-blog</title><meta data-react-helmet="true" name="description" content="This is the part 4 of post Intro to Nodejs - part 3. In this post, we will fix two issues we found in last post. Writing all the code in one…"/><style data-href="/tech-blog/commons.c6dceef504ade98e991f.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/tech-blog/static/montserrat-latin-100-50d279861fb3cbfed809eae6ed8b9ac9.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-100-5e334eff013f12fbb8ed72c2a253f119.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/tech-blog/static/montserrat-latin-100italic-8c0705336558194799a8729840d7ed9d.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-100italic-03e19243272affe738654a157625ec26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/tech-blog/static/montserrat-latin-200-4343d3d91a9446226e7a8bbb024111ad.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-200-f2022ecd65a0703ec3edcb7641709a75.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/tech-blog/static/montserrat-latin-200italic-116c4c4b14ef76b0555da09854512022.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-200italic-89614a6008fc5c60739012463d0ee7e6.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/tech-blog/static/montserrat-latin-300-d2ad295b60682a6537c358e06ea80c61.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-300-3a371ee0d175f5c2b15ce1d6b981dc4e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/tech-blog/static/montserrat-latin-300italic-f6b6bf2431003f8142e800f9df157989.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-300italic-16521668f5f238098329cdd7d27c391e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/tech-blog/static/montserrat-latin-400-240a84447b78da0920fcb07e378f2c5f.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-400-b20cc131034316b1c85d0498fb9ed5c5.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/tech-blog/static/montserrat-latin-400italic-86172bb829de6be08b92512096b6aca6.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-400italic-9405e78785a55cf0e4ea7669d4616ea9.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/tech-blog/static/montserrat-latin-500-fb8d6b71dbe8d9294be43082936f649e.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-500-50825d47af7ae47e055018eb689c6c99.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/tech-blog/static/montserrat-latin-500italic-c0a555a4f8e997385a3eebbd4da0b9ee.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-500italic-635de59c4be86285b1f70068c95b9816.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/tech-blog/static/montserrat-latin-600-d5615136a08cfee70deb4be1ee1651df.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-600-f300da4fb4fe00e23915f62b2c643681.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/tech-blog/static/montserrat-latin-600italic-10f29d139edacde92df63374c5672568.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-600italic-2bc37d86a4ba12ce526c4af904a9946e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/tech-blog/static/montserrat-latin-700-7d77e1f03eefc452dab14d7f89080083.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-700-81826529772e52f0f14a4c73c2f2c7f1.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/tech-blog/static/montserrat-latin-700italic-1dd2b53f1567a29e0505de9b27c4352c.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-700italic-c162d257f5e9f9b108a96a604cfb2132.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/tech-blog/static/montserrat-latin-800-d4e7bf86bbd8e5f43ca73fa831218648.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-800-895aadbff357be35ac8dd107c7975ee7.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/tech-blog/static/montserrat-latin-800italic-fc0cbe442f7b3733c91e982e825c4daa.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-800italic-b3362875067300abedb7a8fb97903258.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/tech-blog/static/montserrat-latin-900-c8bdd772c0d1347720ff7e3fb72719f3.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-900-1b99ef78e627dd9bbd0ca4b5c0789547.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/tech-blog/static/montserrat-latin-900italic-cb72c1f90f66c124fb897a75bec64c78.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-900italic-b78bb9f8ecec6c5a924c873f1818095f.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/tech-blog/static/merriweather-latin-300-f015f1e9a46a3b9db4fd64564dacece4.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-300-92dfe81b725c342d31d962da975c07a6.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/tech-blog/static/merriweather-latin-300italic-7fd86b32accf2df4403d1d4fa3a81502.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-300italic-878b76f59d5ba58dd1652dc8d2a0f4f9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/tech-blog/static/merriweather-latin-400-12dbf4c00ae43698f278b099e4b0ec9e.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-400-1fffad22b085a877995812dbf1d9ac08.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/tech-blog/static/merriweather-latin-400italic-1e0d3e8121d88969bfb153c8f174b758.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-400italic-de18d4c4e8e808a7248a185f866ff094.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/tech-blog/static/merriweather-latin-700-dc8fec81a125fc63856587e6683da73b.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-700-d7d2ed8e58f303392cc3fc00ba3a9186.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/tech-blog/static/merriweather-latin-700italic-b7b7e5da4d7be8c12bd5a6c809edc8fc.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-700italic-6210a5fc1c54ca85a5d82aa85d7a9b5c.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/tech-blog/static/merriweather-latin-900-43f870d543dd89fbeb66d417c0d97276.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-900-8f3806df74937c7b8b53f24ae1e725d1.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/tech-blog/static/merriweather-latin-900italic-168c1ab28ed0e4e7d654334def288bc1.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-900italic-ae7778f01871e35ee142ef207b313b34.woff) format("woff")}</style><link as="script" rel="preload" href="/tech-blog/component---src-templates-blog-post-js-f75c730abf65df6c1fb5.js"/><link as="script" rel="preload" href="/tech-blog/styles-5558ba2574c291251fd8.js"/><link as="script" rel="preload" href="/tech-blog/commons-e463983e32d8453a1846.js"/><link as="script" rel="preload" href="/tech-blog/app-13a28d1403ec4481c4eb.js"/><link as="script" rel="preload" href="/tech-blog/webpack-runtime-2697841c412ddb10adac.js"/><link as="fetch" rel="preload" href="/tech-blog/page-data\intro-to-nodejs-part-4\page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/tech-blog/">tech-blog</a></h3><h1>A very basic introduction to Node.js - Part 4</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">December 01, 2019</p><div><p>
  <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/a717eafa290bf333c4dd1c86076c5b9e/f570d/node-js.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB6ElEQVQoz32ST0sbURTF37xUlyq4iYotFilvJkqCmHkUyfyLSi2lLhS0Gy2lioi68QuYMaZoxbroF5B2UREXhX4G0cTWUHWjErMRim7cdTme+5IganDgcOfNnPnNu/cdxh65bMdUNWHF6Z47rlTrSq160UtS8lXJtLBjsPSBzvysrtaWE3/gdz3JegdKP0vtGWwpr7OFXcFWTyPKwNXfPcnJsPhb56ms4Iv7Ojc7XlYgDdA0FII0+EO2I3kQMJb+o2vkAVR7sNv3S9E769cj3cq0Mr9M0EuAwtW6BKyW6upZhJMxCf1yk9Kjh35OT2CX31BdWru9Mk7vCeh4Zh12Fk/0yG3U/nJHBkZkQxG0XE/A/9AP25b/xlOxcPpAXK2ddwSo15Pr0WbLkgWMY8NxzQvcPwe0+HasO4dvdqa+Rhszh2IQbX8AcC7z16gjYPHNO7MGwPzwTNfTdF4UvhQ7CXgxsRYL25Y8gWcLKgDYXAZuJvtl08/g2RPskGAfoVkAGwj4grbu9ZntjA3xT8dCwPQZpxwttxyD5zskS1GSnWh5HbVVjWjPaMEMe6C227xZ1XM17sfunJxlmdr9CFXLoTLhULRG5rLMkdD8nAj5+6UYIHMqJhSvih/zDFVgftbQMEPKrhYEo+wGOwusfLZj/14AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Intro To Node.js"
        title=""
        src="/tech-blog/static/a717eafa290bf333c4dd1c86076c5b9e/b9e4f/node-js.png"
        srcset="/tech-blog/static/a717eafa290bf333c4dd1c86076c5b9e/cf440/node-js.png 148w,
/tech-blog/static/a717eafa290bf333c4dd1c86076c5b9e/d2d38/node-js.png 295w,
/tech-blog/static/a717eafa290bf333c4dd1c86076c5b9e/b9e4f/node-js.png 590w,
/tech-blog/static/a717eafa290bf333c4dd1c86076c5b9e/f9b6a/node-js.png 885w,
/tech-blog/static/a717eafa290bf333c4dd1c86076c5b9e/f570d/node-js.png 960w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>This is the part 4 of post <a href="https://alamgirqazi.github.io/tech-blog/intro-to-nodejs-part-3/">Intro to Nodejs - part 3</a>.</p>
<p>In this post, we will</p>
<ol>
<li>fix two issues we found in last post. Writing all the code in one .js file and the other was writing secret keys inside our code.</li>
<li>create a complete new API for books.</li>
</ol>
<p>Lets first tackle the first part. Creating a folder structure. Some Web Frameworks like Laravel (PHP), Django (Python), Nest.js (Node.js) create a proper folder structure when you start a project. However, Express.js gives you minimal. It doesnot forces you to follow anything. It gives you full control. This is why we need some boilerplate for Express.js which can help us maintain our project.</p>
<p>I have extracted and created an Express.js boilerplate and uploaded it on Github. It contains most best practices of how backend Express.js projects should be created. We will <code class="language-text">clone</code> that project, see the complete folder structure one by one and go through it.</p>
<p>Here is the link to that repo <a href="https://github.com/alamgirqazi/nodejs-express-mongoose-starter">https://github.com/alamgirqazi/nodejs-express-mongoose-starter</a></p>
<p>First up, open up <code class="language-text">cmd</code>,</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">git clone https://github.com/alamgirqazi/nodejs-express-mongoose-starter.git

cd nodejs-express-mongoose-starter</code></pre></div>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/d8ebcbcd72c782dd397939ceb1e100ca/bfdc0/clone.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 57.25490196078431%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABqElEQVQoz62S3W7aQBCFd9fGP7s2oMQ4NjahxBCltpFSKW1CoCLUirBVc9v3f5PT2YBQEFHbi158OjOzO2dnLLNpkSF/LFAsSpQPcxQlMZ8jL0vcFQU+lwVpjts8x81shk/T6ZtqJhRPbmfIojFSJ0IiY7AgCBFGIeI0xiAcII6GCIMBXNsBY+yf8ITERI3IlAzjKMEoGWGUXiMdphgOEzKN0e/14boupCthCOOtUXBxhq53rS6mwQTZVQYmewrelQcVkV76UFKhY1onBpzxDybjx7rDLFT3X/Hr5w7M9mzwLh32CJ9QdElSg0c4dFk6sC2HpnXg6Jxw3b0qyWEYtLLhYezTdl4Exg9jn8H3yrmehB0R/ICODxP6hkRqB0jsS52frsP/gDir7Xv7psK1HSJxAjD9wYUQR3T+HtM4pXNAx/qcCw7flIitC7hc6QcY/geOULCZC7Z4fkDTNGjb9q/s2h3quka9rVFtK7y8blA3W2Q3dzBZBy6Zsi/lPdZPG2yWFTarH3v9gGpVoV3XaFavqBYVlk/f8fjtGevlC8ZpRoYW/T4KvwEQ4gxMWCX5eQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="clone project"
        title=""
        src="/tech-blog/static/d8ebcbcd72c782dd397939ceb1e100ca/b9e4f/clone.png"
        srcset="/tech-blog/static/d8ebcbcd72c782dd397939ceb1e100ca/cf440/clone.png 148w,
/tech-blog/static/d8ebcbcd72c782dd397939ceb1e100ca/d2d38/clone.png 295w,
/tech-blog/static/d8ebcbcd72c782dd397939ceb1e100ca/b9e4f/clone.png 590w,
/tech-blog/static/d8ebcbcd72c782dd397939ceb1e100ca/f9b6a/clone.png 885w,
/tech-blog/static/d8ebcbcd72c782dd397939ceb1e100ca/2d849/clone.png 1180w,
/tech-blog/static/d8ebcbcd72c782dd397939ceb1e100ca/bfdc0/clone.png 1275w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>we can see a folder being created.</p>
<p>The first thing I often do is change folder name. You can pick any name. After that, I will go inside that folder -> view hidden files -> delete .git folder. because I don’t want my old comment history. I want a brand new git history. Next, I open up package.json and change the name of project.</p>
<p>Since we deleted .git folder, lets do</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">git init

git add .

git commit -m &quot;set up repo&quot;</code></pre></div>
<p>Okay, so lets take a look at the folder structure</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/e8a95e9fe48793b40a6b226fc41ab47e/05cd5/folderstructure.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 52.51759610178668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABlUlEQVQoz4WSWY7bMBBEdZMkM7a1cBVXk5I3xIGNBLn/cSpNSkaMOIP5KLRAsR+rl4brCCYMYspomcOuU9gOI3aDxrZX2HQfa9trMOXp7oheOHTcorFhwnsnIVTGOVwR8xX29Btmn8FVQDvYRawkvKpltkoauq8TGq4cvm4GSp4wxTtOaYaf75DTT7h9ggoRwkdIG9Gtyc96QHuKvfBoTHHYigo8+xtufoJPN9jLL8TLDHvIGHOCoZaUhPY/0Icq0KUj3ggoZMI5XpHDETrfYfIF0u0xSHLGfVVJeHy/amlB0/IR37acLgdYT47IsXBHDNTTBRIIGmrs19gV8L9aoc2X9746HOhQUFOVop6RK0bJ5aw4LGJ0/lnJFVgG8rYTNcmYGdFmCIr9OIGZAEHD4Ga/lus+BL0AGQG9OZAmmHDC6Kh8Sz1UxSWVLl3dtaqn7+dH/pa8Ap0qbmaYcSm9rAqjtSqrVdzykaQ9uKVI/4Re2vKAVWB5ZUMbzwmow3fI9IOWmibsE02ZSjZHgh+gVaqOPiv5Dx6gVjQqP5K9AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="folder structure"
        title=""
        src="/tech-blog/static/e8a95e9fe48793b40a6b226fc41ab47e/b9e4f/folderstructure.png"
        srcset="/tech-blog/static/e8a95e9fe48793b40a6b226fc41ab47e/cf440/folderstructure.png 148w,
/tech-blog/static/e8a95e9fe48793b40a6b226fc41ab47e/d2d38/folderstructure.png 295w,
/tech-blog/static/e8a95e9fe48793b40a6b226fc41ab47e/b9e4f/folderstructure.png 590w,
/tech-blog/static/e8a95e9fe48793b40a6b226fc41ab47e/f9b6a/folderstructure.png 885w,
/tech-blog/static/e8a95e9fe48793b40a6b226fc41ab47e/2d849/folderstructure.png 1180w,
/tech-blog/static/e8a95e9fe48793b40a6b226fc41ab47e/05cd5/folderstructure.png 1847w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h3>Controllers</h3>
<p>They will contain our actual business logic.</p>
<h3>Middlewares</h3>
<p>Middlewares are functions that are executed whenever a request is received by Express.js server. All requests have to go through middlewares first before actually hitting the controllers. This is where we will check if the user is authorized or not. (we will check it using JWT Token).</p>
<h3>Models</h3>
<p>They are kind of an actual schema for your backend. They are optional but using them helps alot in managing node.js applications especially those that use MongoDB.</p>
<h3>Routes</h3>
<p>This is where we define all the routing files. These are the routes that are in the end exposed.</p>
<h3>App.js</h3>
<p>We try to keep this file as small as possible. This is where our Node.js application starts.</p>
<p>lets go through some of the things in <code class="language-text">app.js</code> that wasn’t in previous tutorial</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">require(&#39;dotenv&#39;).config();</code></pre></div>
<p>if you take a look at package.json, there will be a package in dependencies called <code class="language-text">dotenv</code>. It helps us manage environment variables and prevent writing secret values inside our code.</p>
<p>take a look at this code in app.js</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// connection to mongoose
const mongoCon = process.env.mongoCon;

mongoose.connect(mongoCon,{ useNewUrlParser: true,useCreateIndex: true, useUnifiedTopology: true });</code></pre></div>
<p>process.env.mongoCon holds the URL for our database. we’re not directly writing it in our code.</p>
<p>How do we set mongoCon up? create a <code class="language-text">.env</code> file in your project. your app won’t run without it.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/c125d67c462e8c5843e81e34eb7d339e/2970d/env.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 317px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 176.65615141955837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAABJ0AAASdAHeZh94AAAEq0lEQVRIx41Wy3LjVBD1T7AYhsQP2XpdSZZly3aiOI7HJvYkmUdSTM2wYBYs+QGKKr6A4lHFPwBVFK8N8xXAKhvmZw59Wrq28xwWXVfW1T23+/TpbtfcMIPjdcHVDXvynKDRNmp1mhPqu7afrNf7rNbtF3h68TH2Dz/Uw20/xmzxGNNHSxzNV5gfn6LlGjQ7vCR8p9WOTy7w+tPPBPB4/TJMBvCjDEbWMOnjYcPF+7tt3dsGbnbCG8+1/miK45NzAZDDcY5efiCenWC+fILD2QqL1VMs5Hl1eg7THaIT9OCZrKLoqvF9jQ8tN9EXJhmiPzrE8uQ5zp69wOOzCzw9f4mlgL149RpJtl8d7IsNqnVj3KsF4lW+N9OPTXeEwXiKZxev8NHLTwT4HCsBpddt8Wy4P0Mk35DvKB0jG070TDY8RD4+0uTW4t4exgcLcKXLUTrC3mSOYrrAuJhhJCDpoBBK+rrPQ3alKvgcJrkavayFEib54w/Hi4XYALstH8XYg4lLqTBBbpjihx9/wuXlJf76+x+8ffsvvvnue7z3oK6JqjtBGbKNnZxQR5ot+SCIImRZrJd0gq4e+urrb/Hb73/g519+xZ9v3uDzL77Egx1Hv+G+AtqQyUUp6hC7joEX+JjseQKWqIzoIQ/RqEuCULNBnK3lpIDpQGSyOJONoQKWByL4cYFOOFDv/KinYXump8Z9+53V5RqQnpHHksNk7YGXSCJEAa4CZvAFiN4Q3Hp6VeQVoBUlE7Pt4WGUIhWAjoQaCGAY9/UgybcA26BrQOpv+uhEZdNyS3KbApgKoDEpHD9R/mxi7qtjBczyCVjPPVmbnUi9I+GtYQ9uVzgTMCaF3KknFW+3mQJqDVdaLENmWAajYYRQpONKlqMkQ9Px0XA8NFp3mOxR/DVbmyxBC7jTMngyD5D3I+wdzDA5nOHhThM7dUdtt9G+YvadArIfsnX1h1Pl0PLR8qlLCTvsakKYXU84bZOOSgnXTbsNRU0OCWyTQsB2QI9TBWRSaFaDemnHrDu7muWQ/FGLJYexyqIuB9KOi47UtVdJht7R9MJKOhsLNlkmfxZQ69pQexnyrIdYunUoe+xAJt0UwG3N1eZCK4Vdu6yYEeLsQA4XOF1KGysK5MUxRkJLmk8FfIyoV8g3Ny3K2OLyEnBczFXYbb+rQmbXaUXS7jX7tIESHiSsbYq9W1lyZVUPGSpBrWwsHx9EYzR94S2salmyzKHFpLBf3lkpROXg4Q96ptUg5phc277tNKVsyt/brexGpQyEv8XqucySo7UOCdgKZHhJGKxhW8u2c9uLt8fqGpA1XEyXOqgUUOerbMZiRhqoqJ+ysfVMD0Od1wNtZzcAyeFmptibDdphJCGX7X/jZZkwu9rWz3JdA9qZapuDBXSNX3oYl96Ybq5mx8F2X7zFw+uAAdrpBA4TJTXq+hE6Mj9Ki240V8c17/IwgDNYSKbFGy+EH8YKSvOCq3NE696L7gfk37gk8uSw0VIsZVMOKYZ77wi4i0Mv4F+7SBPiVd2mTFByBeR/JYU6bHT3RYvlgCrLr69e1reAbk3KrYA8IM8sMw5zx6vmzLU5fFvI/wF0AS/LOPoa9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="env file"
        title=""
        src="/tech-blog/static/c125d67c462e8c5843e81e34eb7d339e/2970d/env.png"
        srcset="/tech-blog/static/c125d67c462e8c5843e81e34eb7d339e/cf440/env.png 148w,
/tech-blog/static/c125d67c462e8c5843e81e34eb7d339e/d2d38/env.png 295w,
/tech-blog/static/c125d67c462e8c5843e81e34eb7d339e/2970d/env.png 317w"
        sizes="(max-width: 317px) 100vw, 317px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>There will be a sample.env file in our project. copy the contents from there to .env file.</p>
<p>Now to run the project, first</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm i

or

yarn install</code></pre></div>
<p>then</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm run dev</code></pre></div>
<p>Great. Our app should be running now.</p>
<p>The login/register methods in this should work and some other methods have been added as well. They are in <code class="language-text">users.controllers.js</code></p>
<p>Lets take a look at line 49 of app.js</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">app.use(&quot;/users&quot;,UsersRoutes);</code></pre></div>
<p>This means all user related routes will start from <code class="language-text">localhost:3000/users</code>. In case we want to add more, we can easily add multiple routes.</p>
<p>Lets first signup</p>
<p>go to postman and post register <a href="localhost:3000/users/register">localhost:3000/users/register</a></p>
<p>try it again and it will throw this error</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/ce6fb56b182e6ccc85a52cdf3413004e/a83d3/duplicate.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 70.17398508699254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAACTklEQVQ4y42Sy05UQRCGz/u4QY0JsjDxcTTeQgIbN8YLOoIwAzMKCGgID2DiA6gLNwQNETUjLF3I3M6l793n8lt9zkxglBhP8p36u7q6urqrg/cbC3i1tYOVtW0sNTdQb20Rm3i80MTDWgOLjVXUnjUxN+9ZId8yHj1dxoMnDYrfLGPvk56vr6O2+ALB3r1zeDt3Fc9nr6A1PYn12SmsEY1bF7F4fQKvZy5h9c4FNG56zqN+YwJLhLerM1NoTl9G6/YEtu9O4eXsJAIkB0D8GQg/AfLbkK+A+AKo72QPKm3agPsBpIeAJv9gj9bskt4HLM2z/TJH0A8FOgOBQSzR6TPSvCRiBrFwiLklKp2IFIlMEXGyicC7Q4NrbyxaHw1CWh9yh0AKDsEZlJLwukJASQHGEmitoGlODfHjKAohkhBHHYWdPYEPR+RPBlA8QdDtdpGmKf78iqKgxRpZlpV6hP/yPCd/Poqs/nmGLKUK2+02OOdl0OmFHikljDF/+Yd5kZNI8wIZ4V0Z5QgGYVhWclZCa+0ZyYqx2JMqyU+nCYzksFSFc46qsTAuLRNZGrsh/koqKu2cLWNSmpNKQ2gL5TF05PDXT+pYDEbHZowhYWTjGEYk5VH8Hf4L5zci6xNrbRAcU1OiSCDq01NJLO1Gu5oUmjBp8V9YQru8PB11uQNnHcRxjEGX2q/y070eu6Nxxl/EqPtBt1M9G8skop4CZ7Srol0NoStt9AmaxnR1VEQOyb0vp0SnEvZ6vbF3SL4yoLIjPY4vqPA6G41PEv4G0tYJVTi8c4EAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="duplicate"
        title=""
        src="/tech-blog/static/ce6fb56b182e6ccc85a52cdf3413004e/b9e4f/duplicate.png"
        srcset="/tech-blog/static/ce6fb56b182e6ccc85a52cdf3413004e/cf440/duplicate.png 148w,
/tech-blog/static/ce6fb56b182e6ccc85a52cdf3413004e/d2d38/duplicate.png 295w,
/tech-blog/static/ce6fb56b182e6ccc85a52cdf3413004e/b9e4f/duplicate.png 590w,
/tech-blog/static/ce6fb56b182e6ccc85a52cdf3413004e/f9b6a/duplicate.png 885w,
/tech-blog/static/ce6fb56b182e6ccc85a52cdf3413004e/2d849/duplicate.png 1180w,
/tech-blog/static/ce6fb56b182e6ccc85a52cdf3413004e/a83d3/duplicate.png 1207w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>It says that a user with email bilal@gmail.com has already been registered.</p>
<p>Lets go to <code class="language-text">users.controllers.js</code> and update register method</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">catch (ex) {
    console.log(&#39;ex&#39;, ex);
    if(ex.code===11000){
      res
      .send({
        message: &#39;This email has been registered already&#39;,
      })
      .status(500);
    }
    else {
    res
      .send({
        message: &#39;Error&#39;,
        detail: ex
      })
      .status(500);
  }
  }</code></pre></div>
<p>Here I check if the error code is 11000, it means its duplicate error so I send a proper error which a user will understand.</p>
<p>You can test the login call as well <a href="localhost:3000/users/login">localhost:3000/users/login</a></p>
<p>Okay, so what we need is to create an API for Books. We want to be able to perform CRUD (Create, Read, Update, Delete) on Books.</p>
<p>Lets start.</p>
<p>First step. Create a model for Books. lets go copy and paste <code class="language-text">users.model.js</code> file and name it <code class="language-text">books.model.js</code></p>
<p>This is what my books.model.js looks like</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">const mongoose = require(&#39;mongoose&#39;);
const mongoosePaginate = require(&#39;mongoose-paginate&#39;);
const Schema = mongoose.Schema;

const Book = new Schema({
     name: {
        type: String
    },
     ibn: {
        type: String,
        unique: true,
        sparse:true
    },
     author: {
        type: String
    },
    image_url: {
        type: String
    },
    is_deleted: {
        type: Boolean,
        default: false
    }
});

Book.plugin(mongoosePaginate);

module.exports = mongoose.model(&quot;Book&quot;, Book);</code></pre></div>
<p>We now need a controller file. lets copy paste <code class="language-text">users.controllers.js</code> file</p>
<p>This is what our books.controllers.js file looks like</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">const booksController = {};
const Books = require(&#39;../models/books.model&#39;);

booksController.getAll = async (req, res) =&gt; {
  let books;
  try {
    let merged = {};
    const start = 0;
    const length = 100;
    books = await Books.paginate(
      merged,
      {
        offset: parseInt(start),
        limit: parseInt(length)
      }
    );
    res.status(200).send({
      code: 200,
      message: &#39;Successful&#39;,
      data: books
    });
  } catch (error) {
    console.log(&#39;error&#39;, error);
    return res.status(500).send(error);
  }
};

booksController.addBook = async (req, res) =&gt; {
  try {

    const body = req.body;

    const book = new Books(body);

  const result = await book.save();

    res.status(200).send({
      code: 200,
      message: &#39;Book Added Successfully&#39;,
    });
  } catch (error) {
    console.log(&#39;error&#39;, error);
    return res.status(500).send(error);
  }
};
module.exports = booksController;</code></pre></div>
<p>Now we need a router file as well.</p>
<p>Here’s what our books.routes.js file looks like</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">const express = require(&quot;express&quot;);
const router = express.Router();

const bookController = require(&#39;../controllers/books.controllers&#39;);

router.get(&quot;/&quot;,bookController.getAll);
router.post(&quot;/add&quot;,bookController.addBook);
// router.get(&quot;/:_id&quot;,bookController.getSingleBook);
// router.put(&quot;/:_id&quot;, bookController.updateBook);
// router.delete(&quot;/:_id&quot;, bookController.deleteBook);


module.exports = router;</code></pre></div>
<p>Right now, we focus only on Adding books and retrieving books.</p>
<p>We have all files ready, we just need to update our <code class="language-text">App.js</code></p>
<p>we first add routes for Books</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// Requiring Routes

const UsersRoutes = require(&#39;./routes/users.routes&#39;);
const BooksRoutes = require(&#39;./routes/books.routes&#39;);</code></pre></div>
<p>and we configure them with Express.js framework</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// Routes which should handle requests
app.use(&quot;/users&quot;,UsersRoutes);
app.use(&quot;/books&quot;,BooksRoutes);</code></pre></div>
<p>Okay, lets go to Postman and see if our new API is working</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/78b2b33133aaf8dca4215be766bb577e/015f2/getempty.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 71.03559870550163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAACSElEQVQ4y5WS2UtVURSHz7/TS2RR9FBYj/0NgRFhIEVED9EAFTQgDUQPkpZjaZomji++9FYQmYopRen1gjl0zx08875n+lrn3JtcHwrd8LHW2mftH3v99tG6nz5hYmiYrt4ROnsGhSG6Xg3xorOf1pe9Egdo63hDW3sfrQmyl/BcaO9+S0f3IC1tr6Wnn2ctnWi9jfuYvF1P85VT3G06TvNFyS+d5Na5I1w9vZ9HTUe533iYm2cPpVxrOMD1hjpunDnIA+m9d6Fe8joeXz7BnfPH0JY+9sD6JOWlYdTyGMHKOP7yqMQxyisTRCuSZ0YoZ0bxhTA7QZAdx/g2iPd9AFbfwdqI9A2Tn+tD+/FzDScEy4sxJSk5EbYrKDAFW/a37JCiFWLaAU5131MhH7JwdQpGF6X2YUO30RZnvmDkNzFKBQp5nWJBxzS2sEwD20owcWxLMLETpDblm2cVmcmaPHxvMLW4ldYbv1blhl/niT2LoKyIopg4jnFdF8dxUEqhPI8wDNP9OI6qMSYSoBYo5H6jZTLZtIiqjckhV0S8REzwJA+CoCISRTsIhXIQ4QvJyucLMvL0J8quJePYWJbgVG7nuU4qlOD7/j9xXA/LVRIV6xtyw4X5hW2xJKbjSvRde3u8/0E1JrboOR1tbnYu9cnKyUMYCrGy0gi7EtwWTkfOi+DMrHjg4xVtipsl8aVWjF1SFdRFcPrzdOqbpyLxIZD/KUYFe0TO+PIuOb1QGTkIA2rXXkatHblULFUEE0P/ClH9uPu1U/APPMQBprnLbmkAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="get empty"
        title=""
        src="/tech-blog/static/78b2b33133aaf8dca4215be766bb577e/b9e4f/getempty.png"
        srcset="/tech-blog/static/78b2b33133aaf8dca4215be766bb577e/cf440/getempty.png 148w,
/tech-blog/static/78b2b33133aaf8dca4215be766bb577e/d2d38/getempty.png 295w,
/tech-blog/static/78b2b33133aaf8dca4215be766bb577e/b9e4f/getempty.png 590w,
/tech-blog/static/78b2b33133aaf8dca4215be766bb577e/f9b6a/getempty.png 885w,
/tech-blog/static/78b2b33133aaf8dca4215be766bb577e/2d849/getempty.png 1180w,
/tech-blog/static/78b2b33133aaf8dca4215be766bb577e/015f2/getempty.png 1236w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>It works. Since we haven’t added any book, docs is empty.</p>
<p>Lets add a books then</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/568badf9ed335598ed2a29036bb4af4e/84739/addbook.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 71.76759410801964%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAACX0lEQVQ4y5WSyU4UURSG631MjHNMNCJbH8E4xbjAgAtjopiwMHQkvAECjSABuhmk9y58AjdCADVFB5C5aamqW2PX8HlutSC2McFKvrqnzvDfc+4tY2ZwgMr0HGOTFUbfzTA6PsvY+BzF0TKDwxP5OjxSYqg4xdDIFIPFyZw3w5MUx6Z5K/kDQxPik5jEjUrXGeZ7btL39Ba9Hdd53dlG35N2eh5e4dnts/R3XKXw6DLd9y/y8sElnt85x4u7mvMUHt+g0NlO970L9He1Uei4hlFbLJNtVAi+zhCa74lWBXOOxuq82BWSVbHlOzSba1ytCPPYSyXcpQlYK8PmLLFZJvpWwtjZd1AReEGKCjIsH5Sf4olPheIPM2w/44dKcNy46Rf8MGVxF159hNJnnQeOYHxfX8M6rGPbFgcHNWq729T2dlCOhSM+R1albDzXwVVObjuOje/UWd606f1gM/XJwrMPUPYhxv7ePmEUEXourufjWnVc2SAIAnzfpyGxNElI0/SYLMtIBUiPSdOMOApk5O0dIinKdLIuzJPJC7VgIj4tcJIgDAkkpnMbiUZqRSwORXBhYQHLstDPySL9KKVyWmMnO/1NShLHGCvLK3ie91cX8so717QKHm3Y+q2nMbY2t/IRWkfLx2k0/ji7I3RuLN007Sba1j5jy/xC4Km8S0e5KFcuRsb0XTcX/BfRr9XzA/nNorzOCyKMjfV1OScnF3FFRF+EJzceB64e6pQg3TWaZ2iapoj5OHUPy05kJ/lB5R5k4/wGo1hGPw2SG8voRrValfZjxBZH9ifpfyIiPwHBGAOsZrzzUgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="add book"
        title=""
        src="/tech-blog/static/568badf9ed335598ed2a29036bb4af4e/b9e4f/addbook.png"
        srcset="/tech-blog/static/568badf9ed335598ed2a29036bb4af4e/cf440/addbook.png 148w,
/tech-blog/static/568badf9ed335598ed2a29036bb4af4e/d2d38/addbook.png 295w,
/tech-blog/static/568badf9ed335598ed2a29036bb4af4e/b9e4f/addbook.png 590w,
/tech-blog/static/568badf9ed335598ed2a29036bb4af4e/f9b6a/addbook.png 885w,
/tech-blog/static/568badf9ed335598ed2a29036bb4af4e/2d849/addbook.png 1180w,
/tech-blog/static/568badf9ed335598ed2a29036bb4af4e/84739/addbook.png 1222w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Lets add a few more and test <a href="localhost:3000/books">localhost:3000/books</a> again</p>
<p>I added 3 books and now I can see them</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/0fc7fed018fa2eda3a29239c7dac18ee/c6a5f/response.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 50.98280098280098%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAAA40lEQVQoz51SW27DMAzzzXeOHaUH6FWGJrVTxW/Htji56Iai6EdSAQQMSKBJUYqWBUQEYwwWeVtrD2DFciN8nSy+z4QtEBTpGc57OOfgQ0AKDq1WtNZ2ocpsKA2xVOScoYyoiuQRXJGBDmDgs+q9Qw2b3BnZRphLwXpr2AqD+SD+CMfuRmUbsOqCGEbrOOG/QqMfhG4ozC8K8QHhi8IU+WkrvHN7T4TTNKNKDp4i5p+M6dLkjDpS6dgaBLwTQBEipbW+8ycJha4bnIWkzfKbQBqdeReG63El95RrKgg2vbF53PIvvfUQ+hn4za4AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="response"
        title=""
        src="/tech-blog/static/0fc7fed018fa2eda3a29239c7dac18ee/b9e4f/response.png"
        srcset="/tech-blog/static/0fc7fed018fa2eda3a29239c7dac18ee/cf440/response.png 148w,
/tech-blog/static/0fc7fed018fa2eda3a29239c7dac18ee/d2d38/response.png 295w,
/tech-blog/static/0fc7fed018fa2eda3a29239c7dac18ee/b9e4f/response.png 590w,
/tech-blog/static/0fc7fed018fa2eda3a29239c7dac18ee/f9b6a/response.png 885w,
/tech-blog/static/0fc7fed018fa2eda3a29239c7dac18ee/2d849/response.png 1180w,
/tech-blog/static/0fc7fed018fa2eda3a29239c7dac18ee/c6a5f/response.png 1628w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>I can even test this in the browser</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/f4247d754673a7df9264054f4dfb6c91/7e73b/browserresponse.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 66.8356263577118%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABJ0AAASdAHeZh94AAAA7UlEQVQ4y6WS6W6EMAyEef/H7GqLKIUlsXMfU4cVqN1fDWtlZCnHxF+cIcaIIHo8tGiD0gTrfJecf2ZjHYacM+Z5ARuPXBPejaHWCuccrDViypITUk7IJQNVhqz3aDdswUSYlgn39Q5tNUIK+/wlwyYmxqYUONBZ/nFZN3IpBV6wmRnGRMQUn8i/KuwybEFKY/z+xG25ncj15Q3/bdhkjAEJtov2z4Ze7BO5dZqYRPKnghVjh1JLN/aJrDaFcR4F+QNfagJ7lovyNcO2d2+KsfBSGeobyPsfFNR1JRxnXxvRXWEIQd5QulquGx3xAzMQAy8tWuLfAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="browser response"
        title=""
        src="/tech-blog/static/f4247d754673a7df9264054f4dfb6c91/b9e4f/browserresponse.png"
        srcset="/tech-blog/static/f4247d754673a7df9264054f4dfb6c91/cf440/browserresponse.png 148w,
/tech-blog/static/f4247d754673a7df9264054f4dfb6c91/d2d38/browserresponse.png 295w,
/tech-blog/static/f4247d754673a7df9264054f4dfb6c91/b9e4f/browserresponse.png 590w,
/tech-blog/static/f4247d754673a7df9264054f4dfb6c91/f9b6a/browserresponse.png 885w,
/tech-blog/static/f4247d754673a7df9264054f4dfb6c91/2d849/browserresponse.png 1180w,
/tech-blog/static/f4247d754673a7df9264054f4dfb6c91/7e73b/browserresponse.png 1381w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Awesome.</p>
<p>We covered a lot of things in this. Before we dwelve deep into Node.js, we need to connect it to a web app or a mobile app because frankly we’re tired of Postman. In next tutorial, we will use this api with an Angular web app and an Ionic mobile app.</p>
<p>Here is <a href="https://github.com/alamgirqazi/intro-to-nodejs-part4">Link to code of part 4</a></p></div><hr style="margin-bottom:1.75rem"/><div style="display:flex;margin-bottom:4.375rem"><img src="/tech-blog/static/alam01-25193be04dba408a817254b28d0215b0.jpg" alt="Alamgir Qazi" style="border-radius:50%;margin-right:0.875rem;margin-bottom:0;width:3.5rem;height:3.5rem"/><p>Hey there, I&#x27;m Alamgir Qazi. I work as a full-stack JavaScript Developer. I&#x27;ll be sharing what I&#x27;ve learned about Angular, Node, Docker, Kubernetes and other cool things.</p></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/tech-blog/intro-to-nodejs-part-3/">← <!-- -->A very basic introduction to Node.js - Part 3</a></li><li><a rel="next" href="/tech-blog/intro-to-nodejs-part-5/">A very basic introduction to Node.js - Part 5<!-- --> →</a></li></ul></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/intro-to-nodejs-part-4/";window.webpackCompilationHash="274a09c0e537151c9ad7";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-13a28d1403ec4481c4eb.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-2223fabe0a5d5ce97932.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-f75c730abf65df6c1fb5.js"],"component---src-pages-404-js":["/component---src-pages-404-js-bfcfeb502e0b4bb62413.js"],"component---src-pages-index-js":["/component---src-pages-index-js-4513653e6f9bbe734230.js"]};/*]]>*/</script><script src="/tech-blog/webpack-runtime-2697841c412ddb10adac.js" async=""></script><script src="/tech-blog/app-13a28d1403ec4481c4eb.js" async=""></script><script src="/tech-blog/commons-e463983e32d8453a1846.js" async=""></script><script src="/tech-blog/styles-5558ba2574c291251fd8.js" async=""></script><script src="/tech-blog/component---src-templates-blog-post-js-f75c730abf65df6c1fb5.js" async=""></script></body></html>